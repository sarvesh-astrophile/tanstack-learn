import{I as J}from"./input-Cvl9ctBd.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
import{b as A,f as B,r as d,k as E,c as g,B as M,e as P,i as Q,L as S, h as T,j as t,d as U,P as V,u as X,t as y}from"./main-2UVUqwYZ.js";const W=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Y=A("check",W);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]],ee=A("trash",Z);function te(e){const r=d.useRef({value:e,previous:e});return d.useMemo(()=>(r.current.value!==e&&(r.current.previous=r.current.value,r.current.value=e),r.current.previous),[e])}var N="Checkbox",[re]=U(N),[se,R]=re(N);function oe(e){const{__scopeCheckbox:r,checked:n,children:a,defaultChecked:c,disabled:o,form:h,name:p,onCheckedChange:l,required:s,value:m="on",internal_do_not_use_render:f}=e,[x,v]=X({prop:n,defaultProp:c??!1,onChange:l,caller:N}),[k,C]=d.useState(null),[j,i]=d.useState(null),u=d.useRef(!1),w=k?!!h||!!k.closest("form"):!0,_={checked:x,disabled:o,setChecked:v,control:k,setControl:C,name:p,form:h,value:m,hasConsumerStoppedPropagationRef:u,required:s,defaultChecked:b(c)?!1:c,isFormControl:w,bubbleInput:j,setBubbleInput:i};return t.jsx(se,{scope:r,..._,children:ne(f)?f(_):a})}var L="CheckboxTrigger",D=d.forwardRef(({__scopeCheckbox:e,onKeyDown:r,onClick:n,...a},c)=>{const{control:o,value:h,disabled:p,checked:l,required:s,setControl:m,setChecked:f,hasConsumerStoppedPropagationRef:x,isFormControl:v,bubbleInput:k}=R(L,e),C=B(c,m),j=d.useRef(l);return d.useEffect(()=>{const i=o?.form;if(i){const u=()=>f(j.current);return i.addEventListener("reset",u),()=>i.removeEventListener("reset",u)}},[o,f]),t.jsx(P.button,{type:"button",role:"checkbox","aria-checked":b(l)?"mixed":l,"aria-required":s,"data-state":$(l),"data-disabled":p?"":void 0,disabled:p,value:h,...a,ref:C,onKeyDown:T(r,i=>{i.key==="Enter"&&i.preventDefault()}),onClick:T(n,i=>{f(u=>b(u)?!0:!u),k&&v&&(x.current=i.isPropagationStopped(),x.current||i.stopPropagation())})})});D.displayName=L;var q=d.forwardRef((e,r)=>{const{__scopeCheckbox:n,name:a,checked:c,defaultChecked:o,required:h,disabled:p,value:l,onCheckedChange:s,form:m,...f}=e;return t.jsx(oe,{__scopeCheckbox:n,checked:c,defaultChecked:o,disabled:p,required:h,onCheckedChange:s,name:a,form:m,value:l,internal_do_not_use_render:({isFormControl:x})=>t.jsxs(t.Fragment,{children:[t.jsx(D,{...f,ref:r,__scopeCheckbox:n}),x&&t.jsx(O,{__scopeCheckbox:n})]})})});q.displayName=N;var z="CheckboxIndicator",F=d.forwardRef((e,r)=>{const{__scopeCheckbox:n,forceMount:a,...c}=e,o=R(z,n);return t.jsx(V,{present:a||b(o.checked)||o.checked===!0,children:t.jsx(P.span,{"data-state":$(o.checked),"data-disabled":o.disabled?"":void 0,...c,ref:r,style:{pointerEvents:"none",...e.style}})})});F.displayName=z;var H="CheckboxBubbleInput",O=d.forwardRef(({__scopeCheckbox:e,...r},n)=>{const{control:a,hasConsumerStoppedPropagationRef:c,checked:o,defaultChecked:h,required:p,disabled:l,name:s,value:m,form:f,bubbleInput:x,setBubbleInput:v}=R(H,e),k=B(n,v),C=te(o),j=Q(a);d.useEffect(()=>{const u=x;if(!u)return;const w=window.HTMLInputElement.prototype,I=Object.getOwnPropertyDescriptor(w,"checked").set,G=!c.current;if(C!==o&&I){const K=new Event("click",{bubbles:G});u.indeterminate=b(o),I.call(u,b(o)?!1:o),u.dispatchEvent(K)}},[x,C,o,c]);const i=d.useRef(b(o)?!1:o);return t.jsx(P.input,{type:"checkbox","aria-hidden":!0,defaultChecked:h??i.current,required:p,disabled:l,name:s,value:m,form:f,...r,tabIndex:-1,ref:k,style:{...r.style,...j,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});O.displayName=H;function ne(e){return typeof e=="function"}function b(e){return e==="indeterminate"}function $(e){return b(e)?"indeterminate":e?"checked":"unchecked"}function ae({className:e,...r}){return t.jsx("div",{"data-slot":"card",className:g("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...r})}function ce({className:e,...r}){return t.jsx("div",{"data-slot":"card-header",className:g("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...r})}function de({className:e,...r}){return t.jsx("div",{"data-slot":"card-title",className:g("leading-none font-semibold",e),...r})}function ie({className:e,...r}){return t.jsx("div",{"data-slot":"card-description",className:g("text-muted-foreground text-sm",e),...r})}function le({className:e,...r}){return t.jsx("div",{"data-slot":"card-content",className:g("px-6",e),...r})}function ue({className:e,...r}){return t.jsx(q,{"data-slot":"checkbox",className:g("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...r,children:t.jsx(F,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:t.jsx(Y,{className:"size-3.5"})})})}function fe(){const[e,r]=d.useState(""),n=y.todo.getAll.useQuery(),a=y.todo.create.useMutation({onSuccess:()=>{n.refetch(),r("")},onError:s=>{E.error(s.message)}}),c=y.todo.toggle.useMutation({onSuccess:()=>{n.refetch()},onError:s=>{E.error(s.message)}}),o=y.todo.delete.useMutation({onSuccess:()=>{n.refetch()},onError:s=>{E.error(s.message)}}),h=s=>{s.preventDefault(),a.mutate({text:e})},p=(s,m)=>{c.mutate({id:s,completed:!m})},l=s=>{o.mutate({id:s})};return t.jsx("div",{className:"mx-auto w-full max-w-md py-10",children:t.jsxs(ae,{children:[t.jsxs(ce,{children:[t.jsx(de,{children:"Todo List"}),t.jsx(ie,{children:"A list of your todos"})]}),t.jsxs(le,{children:[t.jsxs("form",{onSubmit:h,className:"mb-6 flex items-center space-x-2",children:[t.jsx(J,{type:"text",value:e,onChange:s=>r(s.target.value),placeholder:"Add a new task...",disabled:a.isPending}),t.jsx(M,{type:"submit",disabled:a.isPending||!e.trim(),children:a.isPending?t.jsx(S,{className:"h-4 w-4 animate-spin"}):"Add Todo"})]}),n.isLoading?t.jsx("div",{className:"flex justify-center py-4",children:t.jsx(S,{className:"h-6 w-6 animate-spin"})}):n.data?.length===0?t.jsx("div",{className:"text-center text-sm text-muted-foreground",children:"No tasks yet. Add one above!"}):t.jsx("ul",{className:"space-y-3",children:n.data?.map(s=>t.jsxs("li",{className:"flex items-center justify-between rounded-md border p-2",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(ue,{checked:s.completed,onCheckedChange:()=>p(s.id,s.completed),id:`todo-${s.id}`}),t.jsx("label",{htmlFor:`todo-${s.id}`,className:s.completed?"line-through":"",children:s.text})]}),t.jsx(M,{variant:"ghost",size:"icon",onClick:()=>l(s.id),"aria-label":"Delete todo",children:t.jsx(ee,{className:"h-4 w-4"})})]},s.id))})]})]})})}export{fe as component};
